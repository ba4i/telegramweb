<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ–æ—Ä–∏—è —á–∏—Å–µ–ª - –í–®–≠</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }
        .title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        .subtitle {
            font-size: 16px;
            opacity: 0.8;
            margin-bottom: 30px;
        }
        .menu-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        .status {
            margin-top: 30px;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="title">üìö –¢–µ–æ—Ä–∏—è —á–∏—Å–µ–ª</div>
        <div class="subtitle">–ì–µ–π–º–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –í–®–≠</div>

        <button class="menu-btn" onclick="loadThemes()">üìñ –£–ß–Å–ë–ê</button>
        <button class="menu-btn" onclick="startExam()">üéØ –≠–ö–ó–ê–ú–ï–ù</button>
        <button class="menu-btn" onclick="showStats()">üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê</button>
        <button class="menu-btn" onclick="showProfile()">üë§ –ü–†–û–§–ò–õ–¨</button>
        <button class="menu-btn" onclick="showHelp()">‚ùì –ü–û–ú–û–©–¨</button>

        <div class="status" id="status">
            –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è.
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram?.WebApp;
        if (tg) {
            tg.expand();
            tg.ready();
        }

        async function loadThemes() {
            document.getElementById('status').innerHTML = '–ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–º—ã...';
            try {
                const response = await fetch('/api/themes/');
                const data = await response.json();
                document.getElementById('status').innerHTML = `–ù–∞–π–¥–µ–Ω–æ ${data.themes.length} —Ç–µ–º –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è!`;
            } catch (error) {
                document.getElementById('status').innerHTML = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–º: ' + error.message;
            }
        }

        async function startExam() {
            document.getElementById('status').innerHTML = '–ó–∞–ø—É—Å–∫–∞–µ–º —Ä–µ–∂–∏–º —ç–∫–∑–∞–º–µ–Ω–∞...';
            try {
                const response = await fetch('/api/tickets/');
                const data = await response.json();
                document.getElementById('status').innerHTML = `–ì–æ—Ç–æ–≤ —ç–∫–∑–∞–º–µ–Ω –ø–æ ${data.tickets.length} –±–∏–ª–µ—Ç–∞–º!`;
            } catch (error) {
                document.getElementById('status').innerHTML = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–ª–µ—Ç–æ–≤: ' + error.message;
            }
        }

        function showStats() {
            document.getElementById('status').innerHTML = '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 0 –∏–∑—É—á–µ–Ω–Ω—ã—Ö —Ç–µ–º, 0% –ø—Ä–æ–≥—Ä–µ—Å—Å–∞';
        }

        function showProfile() {
            let user = tg?.initDataUnsafe?.user;
            let name = user ? user.first_name : '–°—Ç—É–¥–µ–Ω—Ç –í–®–≠';
            document.getElementById('status').innerHTML = `–ü—Ä–æ—Ñ–∏–ª—å: ${name}, –£—Ä–æ–≤–µ–Ω—å 1, 0 XP`;
        }

        function showHelp() {
            document.getElementById('status').innerHTML = '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: –í—ã–±–µ—Ä–∏—Ç–µ "–£–ß–Å–ë–ê" –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∏–ª–∏ "–≠–ö–ó–ê–ú–ï–ù" –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π';
        }
    </script>
</body>
</html>
